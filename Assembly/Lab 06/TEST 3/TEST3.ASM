.MODEL TINY
.CODE
.STARTUP
	JMP START
	OLD DD ?

NEWINT9 PROC FAR
	PUSH AX
	MOV AH, 12H
	INT 16H
	TEST AL, 04
	JZ OVER
	IN AL, 60H
	CMP AL, 3DH
	JNE OVER
	
	MOV AH, 0
	MOV AL, 3
	INT 10H
	
	CLD
	
	MOV AX, 0B800H
	MOV ES, AX
	MOV DI, 0
	MOV CX, 25*80
	MOV AX, 2920H
REP STOSW

OVER:
	POP AX
	JMP CS:OLD
	
NEWINT9 ENDP

START:
	MOV AH, 35H
	MOV AL, 09H
	INT 21H
	
	MOV WORD PTR OLD, BX
	MOV WORD PTR OLD+ 2, ES
	MOV AH, 25H
	MOV AL, 09H
	MOV DX, OFFSET NEWINT9
	INT 21H
	
	MOV DX, OFFSET START
	MOV CL, 4
	SHR DX, CL
	INC DX
	MOV AX, 3100
	INT 21H
END
	